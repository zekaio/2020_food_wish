# 食愿记

错误以http状态码的形式返回，错误信息在`message`字段中

## 全局错误码

`401`：未绑定微信账号

`410`：活动未开始/已结束，具体查看`message`字段

`412`：参数错误，直接将`message`字段中的内容显示给用户

`500`：服务器错误



## /info

**请求方法 GET**

> 获取用户信息

**返回参数**

| 参数名  | 参数类型 | 说明         |
| ------- | -------- | ------------ |
| help    | int      | 剩余助愿次数 |
| wish    | int      | 剩余许愿次数 |
| lottery | int      | 剩余抽奖次数 |
| post    | int      | 剩余发帖次数 |

**返回参数示例**

```json
{
    "help": 3,
    "wish": 3,
    "lottery": 3,
    "post": 3
}
```



## 许愿页面

### /playground/player/wish

**请求方式 POST**

> 许愿页面，许愿

**请求参数**

| 参数名  | 类型   | 说明               |
| ------- | ------ | ------------------ |
| title   | string | 许愿文案           |
| content | string | 许愿内容           |
| paper   | int    | 选择的信纸对应的id |
| name    | string | 姓名               |
| tel     | string | 手机号             |
| wechat  | string | 微信号             |

**错误信息**

`406`：剩余许愿次数为0



## 助愿页面

### /playground/others/wish

**请求方式 GET**

>助愿页面，抽取愿望

**请求参数**

| 参数名 | 类型 | 说明                    |
| ------ | ---- | ----------------------- |
| limit  | int  | 返回愿望的数目，默认3条 |

**返回参数**

| 参数名 | 类型  | 说明         |
| ------ | ----- | ------------ |
| wishes | array | 返回多条愿望 |

**wishes**

| 参数名  | 类型   | 说明                                         |
| ------- | ------ | -------------------------------------------- |
| id      | int    | 愿望在数据库中的id，点击要帮助ta时传回给后端 |
| title   | string | 愿望文案                                     |
| content | string | 愿望内容                                     |

**返回参数示例**

```json
{
	"wishes": [
        {
            "id": 3,
            "title": "愿望文案",
            "content": "愿望内容"
        },
        {
            "id": 5,
            "title": "愿望文案",
            "content": "愿望内容"
        }
    ]
}
```



### /playground/others/wish

**请求方式 POST**

> 助愿页面，选择帮助TA

**请求参数**

| 参数名 | 类型 | 说明                                   |
| ------ | ---- | -------------------------------------- |
| id     | int  | GET /playground/others/wish 获取到的id |

**返回参数**

| 参数名 | 类型   | 说明       |
| ------ | ------ | ---------- |
| name   | string | 许愿者姓名 |
| tel    | string | 手机号     |
| wechat | string | 微信       |

**返回参数示例**

```json
{
    "name": "许愿者姓名",
    "tel": "手机号",
    "wechat": "微信号"
}
```

**错误信息**

`404`：任务已被其他人帮助

`406`：剩余助愿次数为0



## 收藏夹页面

### /collection/player/wish

**请求方式 GET**

> 收藏夹页面，我的许愿

**返回参数**

| 参数名 | 类型  | 说明     |
| ------ | ----- | -------- |
| wishes | array | 多个愿望 |

**wishes**

| 参数名  | 类型   | 说明                                                         |
| ------- | ------ | ------------------------------------------------------------ |
| id      | int    | 愿望在数据库中的id，点击我已完成时传回给后端                 |
| name    | string | 许愿者姓名                                                   |
| tel     | string | 许愿者电话                                                   |
| wechat  | string | 许愿者微信                                                   |
| title   | string | 愿望文案                                                     |
| content | string | 愿望内容                                                     |
| status  | int    | 0：未被人帮助，1：被人帮助但是还未完成，2：已完成未确认，3：完成并已确认 |

**返回参数示例**

```json
{
	"wishes": [
        {
            "id": 3,
            "name": "姓名",
            "wechat": "微信号",
            "tel": "电话号码",
            "title": "愿望文案",
            "content": "愿望内容"
        },
        {
            "id": 5,
            "name": "姓名",
            "wechat": "微信号",
            "tel": "电话号码",
            "title": "愿望文案",
            "content": "愿望内容"
        }
    ]
}
```



### /collection/player/wish

**请求方式 POST**

> 收藏夹页面--我的许愿，许愿者确认愿望是否已经被完成

**请求参数**

| 参数名 | 类型 | 说明                     |
| ------ | ---- | ------------------------ |
| id     | int  | 愿望的id                 |
| status | int  | 0：未完成，1：确认已完成 |



### /collection/others/wish

**请求方式 GET**

>收藏夹页面--我的助愿，获取所有愿望

**返回参数**

| 参数名 | 类型  | 说明     |
| ------ | ----- | -------- |
| wishes | array | 愿望内容 |

**wishes**

| 参数名  | 类型   | 说明                                                         |      |
| ------- | ------ | ------------------------------------------------------------ | ---- |
| id      | int    | 愿望在数据库中的id，点击我已完成时传回给后端                 |      |
| name    | string | 许愿者姓名                                                   |      |
| tel     | string | 许愿者电话                                                   |      |
| wechat  | string | 许愿者微信                                                   |      |
| title   | string | 愿望文案                                                     |      |
| content | string | 愿望内容                                                     |      |
| status  | int    | 0：未被人帮助，1：被人帮助但是还未完成，2：已完成未确认，3：完成并已确认 |      |

**返回参数示例**

```json
{
	"wishes": [
        {
            "id": 3,
            "name": "姓名",
            "wechat": "微信号",
            "tel": "电话号码",
            "title": "愿望文案",
            "content": "愿望内容",
            "status": 3
        },
        {
            "id": 5,
            "name": "姓名",
            "wechat": "微信号",
            "tel": "电话号码",
            "title": "愿望文案",
            "content": "愿望内容",
            "status": 1
        }
    ]
}
```



### /collection/others/wish

**请求方式 POST**

> 收藏夹页面，我的助愿，我已实现/放弃

**请求参数**

| 参数名 | 类型 | 说明                                   |
| ------ | ---- | -------------------------------------- |
| id     | int  | GET /collection/others/wish 获取到的id |
| status | int  | 0：放弃，1：我已实现                   |



## 抽奖页面

### /playground/lottery

**请求方式 POST**

> 抽奖--抽奖按钮

**返回参数**

| 参数名  | 类型 | 说明         |
| ------- | ---- | ------------ |
| section | int  | 图鉴对应的id |

**错误信息**

`406`：剩余抽奖次数为0



### /playground/lottery

**请求方法 GET**

> 抽奖--图鉴页面，获取抽奖进度

**返回参数**

| 参数名   | 类型 | 说明         |
| -------- | ---- | ------------ |
| id       | int  | 图鉴对应的id |
| progress | int  | 收集进度0-3  |



## 广场页面

### /playground/square

**请求方式 GET**

> 广场，获取帖子

**请求参数**

| 参数名 | 类型 | 说明                        |
| ------ | ---- | --------------------------- |
| limit  | int  | 一次返回多少条帖子，默认5   |
| offset | int  | 已经获取了多少条帖子，默认0 |

**返回参数**

| 参数名 | 类型  | 说明     |
| ------ | ----- | -------- |
| posts  | array | 多条帖子 |

**posts**

| 参数名  | 类型          | 说明                                                         |
| ------- | ------------- | ------------------------------------------------------------ |
| name    | string        | 用户姓名                                                     |
| content | string        | 帖子内容                                                     |
| pics    | Array[string] | 返回数组，如果没有则返回空数组，图片路径，直接插入到img的src属性中 |

**返回参数示例**

```json
{
	"posts": [
        {
            "name": "用户姓名",
            "content": "帖子内容",
            "pics": ["./imgs/1.png", "./imgs/2.png"]
        },
        {
            "name": "用户姓名",
            "content": "帖子内容",
            "pics": ["./imgs/3.png", "./imgs/4.png"]
        }
    ]
}
```



### /playground/square

**请求方法 POST**

> 广场，发帖

**请求参数**

| 参数名  | 类型          | 说明                                                         |
| ------- | ------------- | ------------------------------------------------------------ |
| content | string        | 帖子内容                                                     |
| pics_id | Array[string] | 调用微信上传图片的接口获取到的file_id，就算只上传一张图片也传入数组 |

**请求参数示例**

```json
{
    "content": "帖子内容",
    "pics_id": ["只有一张图片也像这样返回数组，没有图片不用传入这个参数"]
}
```

**错误信息**

`406`：剩余发帖次数为0